var OMathContent=(()=>{var d=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var H=(i,e)=>{for(var t in e)d(i,t,{get:e[t],enumerable:!0})},q=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of v(e))!x.call(i,n)&&n!==t&&d(i,n,{get:()=>e[n],enumerable:!(r=A(e,n))||r.enumerable});return i};var I=i=>q(d({},"__esModule",{value:!0}),i);var F={};H(F,{initProducts:()=>u});function f(i){C(i),P(i)}function C(i){i.querySelectorAll('figure[data-type="image"]').forEach(e=>O(e))}function O(i){let e=250,t={wheelToZoom:!0,bgOpacity:.9,showAnimationDuration:e,hideAnimationDuration:e},r=new PhotoSwipeLightbox({gallery:i,children:"a[data-pswp-single]",pswpModule:PhotoSwipe,...t,...globalThis.PhotoSwipeLang??{}});r.on("contentAppend",function(o){let a=r.pswp.currSlide.data.element.querySelector("img").getAttribute("data-invert");a&&o.content.element.setAttribute("data-invert",a)});let n=new PhotoSwipeDynamicCaption(r,{type:"below",captionContent:o=>{let a=o.data.element.closest("figure").querySelector("figcaption");return a?a.innerHTML:""},mobileLayoutBreakpoint:()=>!0});r.init()}function P(i){let e=i.querySelectorAll('figure[data-type="video"]'),t={},r={rootMargin:"0px 0px 75px 0px",threshold:0},n=a=>{a.forEach(h=>{let c=h.target,s=c.closest("figure").getAttribute("data-uuid");if(h.isIntersecting){if(t[s]==="new"||t[s]==="inFlow")try{c.play()}catch{}}else c.paused?t[s]!=="new"&&(t[s]="outFlow"):(c.pause(),t[s]="inFlow")})},o=new IntersectionObserver(n,r);e.forEach(a=>{t[a.getAttribute("data-uuid")]="new",o.observe(a.querySelector("video"))})}function b(i){i.querySelectorAll(".accentBlock").forEach(e=>{let t=e.querySelector(":scope > .side > .expand");t&&t.addEventListener("click",()=>e.toggleAttribute("data-expand-open"))})}var g=class{selectorImages;displayImages;constructor(e){this.selectorImages=e.querySelectorAll(":scope > .selector > .inner > .image"),this.displayImages=e.querySelectorAll(":scope > .display > .displayImage"),this.selectorImages.forEach((n,o)=>n.addEventListener("click",()=>{this.selectorImages.forEach(a=>a.removeAttribute("data-current")),n.setAttribute("data-current",""),this.displayImages.forEach(a=>a.removeAttribute("data-current")),this.displayImages[o].setAttribute("data-current","")}));let t=parseFloat(e.getAttribute("data-start"))-1;t<0&&(t=0),t>this.selectorImages.length-1&&(t=this.selectorImages.length-1);let r=this.selectorImages[t];r&&r.click()}};function T(i){i.querySelectorAll(".gallery").forEach(e=>new g(e))}var w={themeVariables:{fontFamily:"Open Sans",primaryColor:"#ecf6ff",primaryBorderColor:"#4672c4",lineColor:"#4672c4",edgeLabelBackground:"#fff",clusterBkg:"#ffffde",clusterBorder:"#bcbc58"},themeCSS:`
        .edgeLabel, .edgeLabel span { font-size: 14px; color: #717171; }

        .featured {
            .nodeLabel
            {
                font-size: 18px;
                font-weight: 600;
                color: white;
            }

            rect { 
                fill: #4672c4;
            }
        }
    `},y={themeVariables:{fontFamily:"Open Sans",primaryColor:"#263044",primaryTextColor:"#dae6f0",primaryBorderColor:"#4672c4",lineColor:"#4672c4",edgeLabelBackground:"#2d2d2d",clusterBkg:"#49482f",clusterBorder:"#6b6a45"},themeCSS:`
        .edgeLabel, .edgeLabel span { font-size: 14px; color: #949494; }

        .featured {
            .nodeLabel
            {
                font-size: 18px;
                font-weight: 600;
                color: white;
            }

            rect { 
                fill: #4672c4;
            }
        }
    `};var l=null;function B(){return(document.documentElement.getAttribute("data-theme")?.split("-").pop()??"light")==="light"?w:y}async function M(i){l=(await MermaidPromise).default,await new Promise(r=>setTimeout(r,10));let e=i.querySelectorAll(".mermaid");for(let r of e)await k(r),L(r);new MutationObserver(()=>{for(let r of e)setTimeout(async()=>{await k(r),L(r)},1)}).observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]})}async function k(i){let t=i.querySelector("pre").innerHTML.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");l.setParseErrorHandler(()=>{}),l.initialize({startOnLoad:!1,theme:"base",...B()});let r="";try{await l.parse(t)&&(r=(await l.render("mermaid-"+i.id,t)).svg)}catch(n){console.error(n),r='<b style="color: red">Error when generating mermaid chart!</b>'}i.querySelector("svg")?.remove(),i.querySelector(".loading")?.remove(),i.insertAdjacentHTML("beforeend",r)}function L(i){let e=i.querySelector(":scope > svg");e&&e.addEventListener("click",()=>{let t=e.cloneNode(!0);t.removeAttribute("style"),t.removeAttribute("width");let r=Math.min(1e3,.9*window.innerWidth),n=e.clientHeight/e.clientWidth,o=new PhotoSwipeLightbox({pswpModule:PhotoSwipe,index:0,dataSource:[{html:t.outerHTML,width:r,height:r*n}],wheelToZoom:!0,bgOpacity:1});o.addFilter("isContentZoomable",()=>!0),o.init(),o.loadAndOpen(0)})}function E(i){i.querySelectorAll("a.link").forEach(e=>{let t,r=!1;e.addEventListener("click",n=>{r||!e.hasAttribute("data-preview")||(n.preventDefault(),clearTimeout(t),r=!0,t=setTimeout(()=>{r=!1},300),OMathEvent.onLinkClick(e,n))})})}function S(i){i.querySelectorAll(".task").forEach(e=>{e.querySelectorAll(":scope > header > .controls > button").forEach(t=>{t.addEventListener("click",()=>{if(t.classList.contains("generate")){globalThis.GenTaskManager.genTask(e);return}t.getAttribute("data-section")==="similar"&&!e.hasAttribute("data-similar-open")&&(e.hasAttribute("data-tasks-generated")||(e.setAttribute("data-tasks-generated",""),e.parentElement.querySelectorAll(":scope > .similarTasks .task.genTask").forEach(r=>globalThis.GenTaskManager.genTask(r)))),e.toggleAttribute(`data-${t.getAttribute("data-section")}-open`)})})})}var p=class{elements;constructor(e){this.elements={},this.elements.task=e,this.elements.statement=e.querySelector(":scope > .statement"),this.elements.sections={},e.querySelectorAll("section").forEach(t=>{this.elements.sections[t.getAttribute("data-name")]=t})}get statement(){return this.elements.statement.innerHTML}set statement(e){this.elements.statement.innerHTML=e}getSectionNames(){return Object.keys(this.elements.sections)}getSectionContent(e){let t=this.elements.sections[e];return t?t.querySelector(":scope > .inner > .content").innerHTML:null}setSectionContent(e,t){let r=this.elements.sections[e];r&&(r.querySelector(":scope > .inner > .content").innerHTML=t)}},m=class{worker;taskMap={};initWorker(){let e=globalThis.TaskGenWorker;this.worker=typeof e=="string"?new Worker(e):e,this.worker.onmessage=t=>{this.setupTask(t.data)}}genTask(e){let t=e.getAttribute("data-script-id");if(this.taskMap[t])return;let r=new p(e);this.taskMap[t]=r,e.setAttribute("data-generating","");let n={};n.scriptId=t,n.script=e.getAttribute("data-script"),n.statement=r.statement;let o={};r.getSectionNames().forEach(a=>{o[a]=r.getSectionContent(a)}),Object.keys(o).length>0&&(n.sections=o),this.worker||this.initWorker(),this.worker.postMessage(n)}setupTask(e){let t=this.taskMap[e.scriptId];t.statement=e.statement,e.sections&&Object.keys(e.sections).forEach(r=>{t.setSectionContent(r,e.sections[r])}),u(t.elements.task),t.elements.task.removeAttribute("data-generating"),delete this.taskMap[e.scriptId]}};var D=[f,b,T,M,E,S];function u(i){i&&D.forEach(e=>e(i))}globalThis.OMath_initProducts=u;globalThis.GenTaskManager=new m;return I(F);})();
